{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useState, useEffect, useCallback } from 'react';\nimport { fetchCurrentRates } from '../services/currencyApi';\nimport { useLocalStorage } from './useLocalStorage';\nexport const useCurrency = () => {\n  _s();\n  const [fromCurrency, setFromCurrency] = useLocalStorage('fromCurrency', 'USD');\n  const [toCurrency, setToCurrency] = useLocalStorage('toCurrency', 'EUR');\n  const [amount, setAmount] = useState(1);\n  const [result, setResult] = useState(0);\n  const [rates, setRates] = useState(null);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(null);\n  useEffect(() => {\n    const fetchRates = async () => {\n      setLoading(true);\n      setError(null);\n      try {\n        const data = await fetchCurrentRates(fromCurrency);\n        setRates(data);\n      } catch (err) {\n        setError('Не удалось загрузить курсы валют');\n      } finally {\n        setLoading(false);\n      }\n    };\n    fetchRates();\n  }, [fromCurrency]);\n  useEffect(() => {\n    if (rates !== null && rates !== void 0 && rates.rates && rates.rates[toCurrency]) {\n      setResult(amount * rates.rates[toCurrency]);\n    }\n  }, [amount, toCurrency, rates]);\n  const swapCurrencies = useCallback(() => {\n    setFromCurrency(toCurrency);\n    setToCurrency(fromCurrency);\n  }, [fromCurrency, toCurrency, setFromCurrency, setToCurrency]);\n  return {\n    fromCurrency,\n    setFromCurrency,\n    toCurrency,\n    setToCurrency,\n    amount,\n    setAmount,\n    result,\n    loading,\n    error,\n    swapCurrencies,\n    rates\n  };\n};\n_s(useCurrency, \"aD+QRoPlGjFX6eWy6lyzgnuDh6A=\", false, function () {\n  return [useLocalStorage, useLocalStorage];\n});","map":{"version":3,"names":["useState","useEffect","useCallback","fetchCurrentRates","useLocalStorage","useCurrency","_s","fromCurrency","setFromCurrency","toCurrency","setToCurrency","amount","setAmount","result","setResult","rates","setRates","loading","setLoading","error","setError","fetchRates","data","err","swapCurrencies"],"sources":["C:/Users/Полина/currency-converter/src/hooks/useCurrency.ts"],"sourcesContent":["import { useState, useEffect, useCallback } from 'react';\r\nimport { fetchCurrentRates } from '../services/currencyApi';\r\nimport { useLocalStorage } from './useLocalStorage';\r\nimport { CurrencyData } from '../types/currency.types';\r\n\r\nexport const useCurrency = () => {\r\n  const [fromCurrency, setFromCurrency] = useLocalStorage('fromCurrency', 'USD');\r\n  const [toCurrency, setToCurrency] = useLocalStorage('toCurrency', 'EUR');\r\n  const [amount, setAmount] = useState<number>(1);\r\n  const [result, setResult] = useState<number>(0);\r\n  const [rates, setRates] = useState<CurrencyData | null>(null);\r\n  const [loading, setLoading] = useState<boolean>(false);\r\n  const [error, setError] = useState<string | null>(null);\r\n\r\n  useEffect(() => {\r\n    const fetchRates = async () => {\r\n      setLoading(true);\r\n      setError(null);\r\n      try {\r\n        const data = await fetchCurrentRates(fromCurrency);\r\n        setRates(data);\r\n      } catch (err) {\r\n      setError('Не удалось загрузить курсы валют');      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchRates();\r\n  }, [fromCurrency]);\r\n\r\n  useEffect(() => {\r\n    if (rates?.rates && rates.rates[toCurrency]) {\r\n      setResult(amount * rates.rates[toCurrency]);\r\n    }\r\n  }, [amount, toCurrency, rates]);\r\n\r\n  const swapCurrencies = useCallback(() => {\r\n    setFromCurrency(toCurrency);\r\n    setToCurrency(fromCurrency);\r\n  }, [fromCurrency, toCurrency, setFromCurrency, setToCurrency]);\r\n\r\n  return {\r\n    fromCurrency,\r\n    setFromCurrency,\r\n    toCurrency,\r\n    setToCurrency,\r\n    amount,\r\n    setAmount,\r\n    result,\r\n    loading,\r\n    error,\r\n    swapCurrencies,\r\n    rates\r\n  };\r\n};"],"mappings":";AAAA,SAASA,QAAQ,EAAEC,SAAS,EAAEC,WAAW,QAAQ,OAAO;AACxD,SAASC,iBAAiB,QAAQ,yBAAyB;AAC3D,SAASC,eAAe,QAAQ,mBAAmB;AAGnD,OAAO,MAAMC,WAAW,GAAGA,CAAA,KAAM;EAAAC,EAAA;EAC/B,MAAM,CAACC,YAAY,EAAEC,eAAe,CAAC,GAAGJ,eAAe,CAAC,cAAc,EAAE,KAAK,CAAC;EAC9E,MAAM,CAACK,UAAU,EAAEC,aAAa,CAAC,GAAGN,eAAe,CAAC,YAAY,EAAE,KAAK,CAAC;EACxE,MAAM,CAACO,MAAM,EAAEC,SAAS,CAAC,GAAGZ,QAAQ,CAAS,CAAC,CAAC;EAC/C,MAAM,CAACa,MAAM,EAAEC,SAAS,CAAC,GAAGd,QAAQ,CAAS,CAAC,CAAC;EAC/C,MAAM,CAACe,KAAK,EAAEC,QAAQ,CAAC,GAAGhB,QAAQ,CAAsB,IAAI,CAAC;EAC7D,MAAM,CAACiB,OAAO,EAAEC,UAAU,CAAC,GAAGlB,QAAQ,CAAU,KAAK,CAAC;EACtD,MAAM,CAACmB,KAAK,EAAEC,QAAQ,CAAC,GAAGpB,QAAQ,CAAgB,IAAI,CAAC;EAEvDC,SAAS,CAAC,MAAM;IACd,MAAMoB,UAAU,GAAG,MAAAA,CAAA,KAAY;MAC7BH,UAAU,CAAC,IAAI,CAAC;MAChBE,QAAQ,CAAC,IAAI,CAAC;MACd,IAAI;QACF,MAAME,IAAI,GAAG,MAAMnB,iBAAiB,CAACI,YAAY,CAAC;QAClDS,QAAQ,CAACM,IAAI,CAAC;MAChB,CAAC,CAAC,OAAOC,GAAG,EAAE;QACdH,QAAQ,CAAC,kCAAkC,CAAC;MAAO,CAAC,SAAS;QAC3DF,UAAU,CAAC,KAAK,CAAC;MACnB;IACF,CAAC;IAEDG,UAAU,CAAC,CAAC;EACd,CAAC,EAAE,CAACd,YAAY,CAAC,CAAC;EAElBN,SAAS,CAAC,MAAM;IACd,IAAIc,KAAK,aAALA,KAAK,eAALA,KAAK,CAAEA,KAAK,IAAIA,KAAK,CAACA,KAAK,CAACN,UAAU,CAAC,EAAE;MAC3CK,SAAS,CAACH,MAAM,GAAGI,KAAK,CAACA,KAAK,CAACN,UAAU,CAAC,CAAC;IAC7C;EACF,CAAC,EAAE,CAACE,MAAM,EAAEF,UAAU,EAAEM,KAAK,CAAC,CAAC;EAE/B,MAAMS,cAAc,GAAGtB,WAAW,CAAC,MAAM;IACvCM,eAAe,CAACC,UAAU,CAAC;IAC3BC,aAAa,CAACH,YAAY,CAAC;EAC7B,CAAC,EAAE,CAACA,YAAY,EAAEE,UAAU,EAAED,eAAe,EAAEE,aAAa,CAAC,CAAC;EAE9D,OAAO;IACLH,YAAY;IACZC,eAAe;IACfC,UAAU;IACVC,aAAa;IACbC,MAAM;IACNC,SAAS;IACTC,MAAM;IACNI,OAAO;IACPE,KAAK;IACLK,cAAc;IACdT;EACF,CAAC;AACH,CAAC;AAACT,EAAA,CAjDWD,WAAW;EAAA,QACkBD,eAAe,EACnBA,eAAe;AAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}