{"ast":null,"code":"import{useState,useEffect,useCallback}from'react';import{fetchCurrentRates}from'../services/currencyApi';import{useLocalStorage}from'./useLocalStorage';export const useCurrency=()=>{const[fromCurrency,setFromCurrency]=useLocalStorage('fromCurrency','USD');const[toCurrency,setToCurrency]=useLocalStorage('toCurrency','EUR');const[amount,setAmount]=useState(1);const[result,setResult]=useState(0);const[rates,setRates]=useState(null);const[loading,setLoading]=useState(false);const[error,setError]=useState(null);useEffect(()=>{const fetchRates=async()=>{setLoading(true);setError(null);try{const data=await fetchCurrentRates(fromCurrency);setRates(data);}catch(err){setError('Не удалось загрузить курсы валют');}finally{setLoading(false);}};fetchRates();},[fromCurrency]);useEffect(()=>{if(rates!==null&&rates!==void 0&&rates.rates&&rates.rates[toCurrency]){setResult(amount*rates.rates[toCurrency]);}},[amount,toCurrency,rates]);const swapCurrencies=useCallback(()=>{setFromCurrency(toCurrency);setToCurrency(fromCurrency);},[fromCurrency,toCurrency,setFromCurrency,setToCurrency]);return{fromCurrency,setFromCurrency,toCurrency,setToCurrency,amount,setAmount,result,loading,error,swapCurrencies};};","map":{"version":3,"names":["useState","useEffect","useCallback","fetchCurrentRates","useLocalStorage","useCurrency","fromCurrency","setFromCurrency","toCurrency","setToCurrency","amount","setAmount","result","setResult","rates","setRates","loading","setLoading","error","setError","fetchRates","data","err","swapCurrencies"],"sources":["C:/Users/Полина/currency-converter/src/hooks/useCurrency.ts"],"sourcesContent":["import { useState, useEffect, useCallback } from 'react';\r\nimport { fetchCurrentRates } from '../services/currencyApi';\r\nimport { useLocalStorage } from './useLocalStorage';\r\nimport { CurrencyData } from '../types/currency.types';\r\n\r\nexport const useCurrency = () => {\r\n  const [fromCurrency, setFromCurrency] = useLocalStorage('fromCurrency', 'USD');\r\n  const [toCurrency, setToCurrency] = useLocalStorage('toCurrency', 'EUR');\r\n  const [amount, setAmount] = useState<number>(1);\r\n  const [result, setResult] = useState<number>(0);\r\n  const [rates, setRates] = useState<CurrencyData | null>(null);\r\n  const [loading, setLoading] = useState<boolean>(false);\r\n  const [error, setError] = useState<string | null>(null);\r\n\r\n  useEffect(() => {\r\n    const fetchRates = async () => {\r\n      setLoading(true);\r\n      setError(null);\r\n      try {\r\n        const data = await fetchCurrentRates(fromCurrency);\r\n        setRates(data);\r\n      } catch (err) {\r\n        setError('Не удалось загрузить курсы валют');\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchRates();\r\n  }, [fromCurrency]);\r\n\r\n  useEffect(() => {\r\n    if (rates?.rates && rates.rates[toCurrency]) {\r\n      setResult(amount * rates.rates[toCurrency]);\r\n    }\r\n  }, [amount, toCurrency, rates]);\r\n\r\n  const swapCurrencies = useCallback(() => {\r\n    setFromCurrency(toCurrency);\r\n    setToCurrency(fromCurrency);\r\n  }, [fromCurrency, toCurrency, setFromCurrency, setToCurrency]);\r\n\r\n  return {\r\n    fromCurrency,\r\n    setFromCurrency,\r\n    toCurrency,\r\n    setToCurrency,\r\n    amount,\r\n    setAmount,\r\n    result,\r\n    loading,\r\n    error,\r\n    swapCurrencies\r\n  };\r\n};"],"mappings":"AAAA,OAASA,QAAQ,CAAEC,SAAS,CAAEC,WAAW,KAAQ,OAAO,CACxD,OAASC,iBAAiB,KAAQ,yBAAyB,CAC3D,OAASC,eAAe,KAAQ,mBAAmB,CAGnD,MAAO,MAAM,CAAAC,WAAW,CAAGA,CAAA,GAAM,CAC/B,KAAM,CAACC,YAAY,CAAEC,eAAe,CAAC,CAAGH,eAAe,CAAC,cAAc,CAAE,KAAK,CAAC,CAC9E,KAAM,CAACI,UAAU,CAAEC,aAAa,CAAC,CAAGL,eAAe,CAAC,YAAY,CAAE,KAAK,CAAC,CACxE,KAAM,CAACM,MAAM,CAAEC,SAAS,CAAC,CAAGX,QAAQ,CAAS,CAAC,CAAC,CAC/C,KAAM,CAACY,MAAM,CAAEC,SAAS,CAAC,CAAGb,QAAQ,CAAS,CAAC,CAAC,CAC/C,KAAM,CAACc,KAAK,CAAEC,QAAQ,CAAC,CAAGf,QAAQ,CAAsB,IAAI,CAAC,CAC7D,KAAM,CAACgB,OAAO,CAAEC,UAAU,CAAC,CAAGjB,QAAQ,CAAU,KAAK,CAAC,CACtD,KAAM,CAACkB,KAAK,CAAEC,QAAQ,CAAC,CAAGnB,QAAQ,CAAgB,IAAI,CAAC,CAEvDC,SAAS,CAAC,IAAM,CACd,KAAM,CAAAmB,UAAU,CAAG,KAAAA,CAAA,GAAY,CAC7BH,UAAU,CAAC,IAAI,CAAC,CAChBE,QAAQ,CAAC,IAAI,CAAC,CACd,GAAI,CACF,KAAM,CAAAE,IAAI,CAAG,KAAM,CAAAlB,iBAAiB,CAACG,YAAY,CAAC,CAClDS,QAAQ,CAACM,IAAI,CAAC,CAChB,CAAE,MAAOC,GAAG,CAAE,CACZH,QAAQ,CAAC,kCAAkC,CAAC,CAC9C,CAAC,OAAS,CACRF,UAAU,CAAC,KAAK,CAAC,CACnB,CACF,CAAC,CAEDG,UAAU,CAAC,CAAC,CACd,CAAC,CAAE,CAACd,YAAY,CAAC,CAAC,CAElBL,SAAS,CAAC,IAAM,CACd,GAAIa,KAAK,SAALA,KAAK,WAALA,KAAK,CAAEA,KAAK,EAAIA,KAAK,CAACA,KAAK,CAACN,UAAU,CAAC,CAAE,CAC3CK,SAAS,CAACH,MAAM,CAAGI,KAAK,CAACA,KAAK,CAACN,UAAU,CAAC,CAAC,CAC7C,CACF,CAAC,CAAE,CAACE,MAAM,CAAEF,UAAU,CAAEM,KAAK,CAAC,CAAC,CAE/B,KAAM,CAAAS,cAAc,CAAGrB,WAAW,CAAC,IAAM,CACvCK,eAAe,CAACC,UAAU,CAAC,CAC3BC,aAAa,CAACH,YAAY,CAAC,CAC7B,CAAC,CAAE,CAACA,YAAY,CAAEE,UAAU,CAAED,eAAe,CAAEE,aAAa,CAAC,CAAC,CAE9D,MAAO,CACLH,YAAY,CACZC,eAAe,CACfC,UAAU,CACVC,aAAa,CACbC,MAAM,CACNC,SAAS,CACTC,MAAM,CACNI,OAAO,CACPE,KAAK,CACLK,cACF,CAAC,CACH,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}