{"ast":null,"code":"import React,{useEffect,useState}from'react';import{LineChart,Line,XAxis,YAxis,CartesianGrid,Tooltip,ResponsiveContainer}from'recharts';import{fetchHistoricalRates}from'../../services/currencyApi';import{useTheme}from'../../hooks/useTheme';import styles from'./CurrencyChart.module.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export const CurrencyChart=_ref=>{let{fromCurrency,toCurrency,timeRange}=_ref;const[data,setData]=useState([]);const[loading,setLoading]=useState(false);const{theme}=useTheme();useEffect(()=>{const fetchData=async()=>{setLoading(true);const days=timeRange==='week'?7:30;const historicalData=await fetchHistoricalRates(fromCurrency,toCurrency,days);const chartData=Object.entries(historicalData).map(_ref2=>{let[date,rates]=_ref2;return{date:new Date(date).toLocaleDateString('ru-RU'),rate:rates[toCurrency]};});setData(chartData);setLoading(false);};fetchData();},[fromCurrency,toCurrency,timeRange]);const formatYAxis=value=>{return value.toFixed(2);};const formatTooltipValue=value=>{return[\"\".concat(value.toFixed(4),\" \").concat(toCurrency),'Курс'];};const formatTooltipLabel=label=>{return\"\\u0414\\u0430\\u0442\\u0430: \".concat(label);};if(loading)return/*#__PURE__*/_jsx(\"div\",{className:styles.loading,children:\"\\u0417\\u0430\\u0433\\u0440\\u0443\\u0437\\u043A\\u0430 \\u0433\\u0440\\u0430\\u0444\\u0438\\u043A\\u0430...\"});return/*#__PURE__*/_jsx(\"div\",{className:styles.chartContainer,children:/*#__PURE__*/_jsx(ResponsiveContainer,{width:\"100%\",height:300,children:/*#__PURE__*/_jsxs(LineChart,{data:data,children:[/*#__PURE__*/_jsx(CartesianGrid,{strokeDasharray:\"3 3\",stroke:theme==='dark'?'#444':'#ccc'}),/*#__PURE__*/_jsx(XAxis,{dataKey:\"date\",stroke:theme==='dark'?'#fff':'#333',tick:{fontSize:12}}),/*#__PURE__*/_jsx(YAxis,{stroke:theme==='dark'?'#fff':'#333',tick:{fontSize:12},tickFormatter:formatYAxis}),/*#__PURE__*/_jsx(Tooltip,{contentStyle:{backgroundColor:theme==='dark'?'#333':'#fff',color:theme==='dark'?'#fff':'#333',border:'none',borderRadius:'8px',padding:'10px'},formatter:formatTooltipValue,labelFormatter:formatTooltipLabel}),/*#__PURE__*/_jsx(Line,{type:\"monotone\",dataKey:\"rate\",stroke:\"#8884d8\",strokeWidth:2,dot:false,name:\"\\u041A\\u0443\\u0440\\u0441\"})]})})});};","map":{"version":3,"names":["React","useEffect","useState","LineChart","Line","XAxis","YAxis","CartesianGrid","Tooltip","ResponsiveContainer","fetchHistoricalRates","useTheme","styles","jsx","_jsx","jsxs","_jsxs","CurrencyChart","_ref","fromCurrency","toCurrency","timeRange","data","setData","loading","setLoading","theme","fetchData","days","historicalData","chartData","Object","entries","map","_ref2","date","rates","Date","toLocaleDateString","rate","formatYAxis","value","toFixed","formatTooltipValue","concat","formatTooltipLabel","label","className","children","chartContainer","width","height","strokeDasharray","stroke","dataKey","tick","fontSize","tickFormatter","contentStyle","backgroundColor","color","border","borderRadius","padding","formatter","labelFormatter","type","strokeWidth","dot","name"],"sources":["C:/Users/Полина/currency-converter/src/components/CurrencyChart/CurrencyChart.tsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport {\r\n  LineChart,\r\n  Line,\r\n  XAxis,\r\n  YAxis,\r\n  CartesianGrid,\r\n  Tooltip,\r\n  ResponsiveContainer\r\n} from 'recharts';\r\nimport { fetchHistoricalRates } from '../../services/currencyApi';\r\nimport { useTheme } from '../../hooks/useTheme';\r\nimport styles from './CurrencyChart.module.css';\r\n\r\ninterface CurrencyChartProps {\r\n  fromCurrency: string;\r\n  toCurrency: string;\r\n  timeRange: 'week' | 'month';\r\n}\r\n\r\nexport const CurrencyChart: React.FC<CurrencyChartProps> = ({\r\n  fromCurrency,\r\n  toCurrency,\r\n  timeRange\r\n}) => {\r\n  const [data, setData] = useState<any[]>([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const { theme } = useTheme();\r\n\r\n  useEffect(() => {\r\n    const fetchData = async () => {\r\n      setLoading(true);\r\n      const days = timeRange === 'week' ? 7 : 30;\r\n      const historicalData = await fetchHistoricalRates(fromCurrency, toCurrency, days);\r\n      \r\n      const chartData = Object.entries(historicalData).map(([date, rates]) => ({\r\n        date: new Date(date).toLocaleDateString('ru-RU'),\r\n        rate: rates[toCurrency]\r\n      }));\r\n      \r\n      setData(chartData);\r\n      setLoading(false);\r\n    };\r\n\r\n    fetchData();\r\n  }, [fromCurrency, toCurrency, timeRange]);\r\n\r\n  const formatYAxis = (value: number) => {\r\n    return value.toFixed(2);\r\n  };\r\n\r\n  const formatTooltipValue = (value: number) => {\r\n    return [`${value.toFixed(4)} ${toCurrency}`, 'Курс'];\r\n  };\r\n\r\n  const formatTooltipLabel = (label: string) => {\r\n    return `Дата: ${label}`;\r\n  };\r\n\r\n  if (loading) return <div className={styles.loading}>Загрузка графика...</div>;\r\n\r\n  return (\r\n    <div className={styles.chartContainer}>\r\n      <ResponsiveContainer width=\"100%\" height={300}>\r\n        <LineChart data={data}>\r\n          <CartesianGrid strokeDasharray=\"3 3\" stroke={theme === 'dark' ? '#444' : '#ccc'} />\r\n          <XAxis \r\n            dataKey=\"date\" \r\n            stroke={theme === 'dark' ? '#fff' : '#333'}\r\n            tick={{ fontSize: 12 }}\r\n          />\r\n          <YAxis \r\n            stroke={theme === 'dark' ? '#fff' : '#333'}\r\n            tick={{ fontSize: 12 }}\r\n            tickFormatter={formatYAxis}\r\n          />\r\n          <Tooltip \r\n            contentStyle={{\r\n              backgroundColor: theme === 'dark' ? '#333' : '#fff',\r\n              color: theme === 'dark' ? '#fff' : '#333',\r\n              border: 'none',\r\n              borderRadius: '8px',\r\n              padding: '10px'\r\n            }}\r\n            formatter={formatTooltipValue}\r\n            labelFormatter={formatTooltipLabel}\r\n          />\r\n          <Line \r\n            type=\"monotone\" \r\n            dataKey=\"rate\" \r\n            stroke=\"#8884d8\" \r\n            strokeWidth={2}\r\n            dot={false}\r\n            name=\"Курс\"\r\n          />\r\n        </LineChart>\r\n      </ResponsiveContainer>\r\n    </div>\r\n  );\r\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}